<h1 mat-dialog-title>Создать новую комнату</h1>
<form [formGroup]='form' (ngSubmit)='form.valid && matDialogRef.close(form.value)'>
  <div mat-dialog-content>

    <mat-form-field appearance='outline' hideRequiredMarker >
      <mat-label>Название</mat-label>
      <input matInput formControlName='name'>
    </mat-form-field>


    <mat-form-field appearance='outline'>
      <mat-label>Адрес (необязательно)</mat-label>
      <input matInput formControlName='alias'>
      <mat-spinner *ngIf='form.get("alias")?.pending' matSuffix diameter="21" style="display: inline-flex"></mat-spinner>

      <mat-error *ngIf="form.get('alias')?.hasError('alreadyInUse')">Адрес уже используется, выберите другой</mat-error>
      <mat-error *ngIf="form.get('alias')?.hasError('minlength')">Минимум 4 символа</mat-error>
    </mat-form-field>

    <mat-form-field appearance='outline' class='pointerChip'>
      <mat-label>Кто видит голоса в процессе голосования?</mat-label>
      <mat-chip-list multiple>
        <mat-chip *ngFor='let c of roomRoles.controls' [selected]='c.value.checked' (click)='c.get("checked")?.setValue(!c.value.checked)'>
          {{c.value.name}}
        </mat-chip>
      </mat-chip-list>
    </mat-form-field>

    <mat-form-field appearance='outline'>
      <mat-label>Варианты голосования</mat-label>
      <mat-chip-list #pointsChipList>
        <mat-chip *ngFor='let point of points.value' (removed)='removePoint(point)' disableRipple [selectable]='false'>
          {{point}}
          <button matChipRemove >
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip>
        <input placeholder='Еще...' maxlength='4' [matChipInputFor]='pointsChipList' [matChipInputAddOnBlur]='true' (matChipInputTokenEnd)='addPoint($event)' />
      </mat-chip-list>
      <mat-error *ngIf="points.invalid">Минимум 2 варианта</mat-error>

    </mat-form-field>
  </div>
  <div mat-dialog-actions [align]="'end'">
    <button mat-flat-button [mat-dialog-close]='false' *ngIf='!matDialogRef.disableClose'>Отмена</button>
    <button mat-flat-button color='primary'>Создать</button>
  </div>
</form>
