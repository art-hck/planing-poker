<pp-header
  [(showPlayers)]="sidebars.showPlayers"
  [(showVotings)]="sidebars.showVotings"
  (showPlayersChange)="sidebars.saveSidebarsState();"
  (showVotingsChange)="sidebars.saveSidebarsState();"
></pp-header>
<ng-container *ngIf="pp.room$ | async as room">
  <mat-drawer-container *ngIf="authService.user$ | async as me">
    <mat-drawer class='app-left-side' [mode]="sidebars.sidenavMode" [(opened)]="sidebars.showPlayers" [autoFocus]="false">
      <!--- USERS --->
      <pp-users [users]="users$ | async" [activeVoting]="activeVoting$ | async" [room]="room"></pp-users>
    </mat-drawer>

    <mat-drawer-content>
      <!--- CARDS --->
      <pp-cards [activeVoting]="activeVoting$ | async" [step]="step" [room]="room"></pp-cards>

      <!--- CREATE --->
      <div class="new-voting-button-wrap" *ngIf="authService.isAdmin(me, room)">
        <div class="new-voting-button-tooltip" *ngIf="!(votings$ | async)?.length" style="">
          <div>Для начала добавьте стори</div>
        </div>
        <button mat-fab color="primary" class="new-voting-button" (click)="openNewVotingModal()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </mat-drawer-content>

    <mat-drawer class='app-right-side' [mode]="sidebars.sidenavMode" [(opened)]="sidebars.showVotings" position="end" [autoFocus]="false">
      <!--- VOTINGS --->
      <pp-votings [votings]="votings$ | async" [room]="room" (select)="pp.activateVoting(($event.id))"></pp-votings>
    </mat-drawer>
  </mat-drawer-container>
</ng-container>
